label: RaceTest
rules:
  - label: start
    event:
      subject:
        anyUser: 
          - "PI"     
      operations:
        - start
      target:
        policyElements:
          - name: PDSWhole
            type: O        
    response:      
      actions: 
        - grant:
             subject:
               name: PI
               type: UA
             operations:
               - submit
             target:
               name: PDSWhole
               type: OA    
  
  - label: obligation0
    event:
      subject:
        anyUser: 
          - "PI"     
      operations:
        - submit
      target:
        policyElements:
          - name: PDSWhole
            type: O        
    response:      
      actions: 
        - assign:
            - what:
                name: UBM
                type: U
              where:
                name: BM
                type: UA                    
  - label: obligation1
    event:
      subject:
        anyUser: 
          - "PI"     
      operations:
        - submit
      target:
        policyElements:
          - name: PDSWhole
            type: O        
    response:      
      actions: 
        - assign:
            - what:
                name: UBM
                type: U
              where:
                name: BM
                type: UA  
  - label: obligation2
    event:
      subject:
        anyUser: 
          - "PI"     
      operations:
        - submit
      target:
        policyElements:
          - name: PDSWhole
            type: O        
    response:      
      actions: 
        - grant:
             subject:
               name: RD
               type: UA
             operations:
               - approve
               - withdraw
             target:
               name: PDSWhole
               type: OA    
  # - label: obligation3
  #   event:
  #     subject:
  #       anyUser: 
  #         - "PI"     
  #     operations:
  #       - submit
  #     target:
  #       policyElements:
  #         - name: PDSWhole
  #           type: O        
  #   response:      
  #     actions: 
  #       - assign:
  #           - what:
  #               name: URD
  #               type: U
  #             where:
  #               name: RD
  #               type: UA 
