(set-logic UFDTLIRA)
(set-option :produce-models true)
(declare-fun M (Int) Int)
(declare-fun k () Int)
(assert (= (M 0) 1))
(assert (= (M 3) 1000))
(assert (= k 3))
(assert (or (= (M 1) (+ (M (- 1 1)) 1)) (= (M 1) (* (M (- 1 1)) 2))))
(assert (or (= (M 2) (+ (M (- 2 1)) 1)) (= (M 2) (* (M (- 2 1)) 2))))
(assert (or (= (M 3) (+ (M (- 3 1)) 1)) (= (M 3) (* (M (- 3 1)) 2))))

(check-sat)(get-model)