(set-logic ALL_SUPPORTED)
(set-option :produce-models true)
(declare-fun Containment () (Set (Tuple String String)))
(declare-fun Tclosure () (Set (Tuple String String)))
(declare-fun Associations () (Set (Tuple String String String)))
(declare-fun UA_U_Reachability () (Set (Tuple String String)))
(declare-fun AT_Reachability () (Set (Tuple String String)))
(assert (= Associations (insert (mkTuple "UA1" "add" "UA3") (mkTuple "UA1" "test" "UA2") (mkTuple "UA1" "w" "OA1") (mkTuple "UA2" "r" "OA2") (singleton (mkTuple "UA2" "x" "OA2")))))
(assert (= Containment (insert (mkTuple "OA1" "OA2") (mkTuple "U2" "UA2") (mkTuple "OA1" "OA1") (mkTuple "UA1" "UA2") (mkTuple "UA1" "UA1") (mkTuple "UA2" "PC1") (mkTuple "OA2" "PC1") (mkTuple "U1" "UA1") (mkTuple "O1" "OA1") (mkTuple "O2" "OA2") (mkTuple "UA3" "UA3") (mkTuple "UA3" "PC1") (mkTuple "OA2" "OA2") (mkTuple "U3" "UA3") (singleton (mkTuple "UA2" "UA2")))))
(assert (= Tclosure (tclosure Containment)))

(declare-fun SetToCheckUA () (Set (Tuple String String)))
(declare-fun SetToCheckAT () (Set (Tuple String String)))
(assert (= SetToCheckUA (insert (mkTuple "UA1" "UA1") (mkTuple "UA1" "UA1") (mkTuple "UA2" "UA2") (mkTuple "UA2" "UA2") (singleton (mkTuple "UA1" "UA1")))))
(assert (= SetToCheckAT (insert (mkTuple "O1" "O1") (mkTuple "O2" "O2") (mkTuple "O1" "O1") (mkTuple "O2" "O2") (singleton (mkTuple "U3" "U3")))))
(assert (= UA_U_Reachability (join SetToCheckUA Tclosure )))
(assert (= AT_Reachability (join SetToCheckAT Tclosure )))
(declare-fun AssociationsForUA () (Set (Tuple String String String)))
(assert (= AssociationsForUA (join UA_U_Reachability Associations) ))
(declare-fun FinalJoin () (Set (Tuple String String String)))
(assert (= FinalJoin (join AssociationsForUA (transpose AT_Reachability)) ))
(check-sat)
(get-value (FinalJoin))
